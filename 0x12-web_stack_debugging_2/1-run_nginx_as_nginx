#!/usr/bin/env bash

# Install nginx if not already installed
if ! command -v nginx &> /dev/null; then
    echo "Installing nginx..."
    apt-get update
    apt-get install nginx -y
    exit 1
fi

# Stop nginx service
sudo service nginx stop

# Modify nginx configuration to run as nginx user and listen on port 8080
echo 'user nginx;' | sudo tee /etc/nginx/nginx.conf >/dev/null
echo 'listen *:8080;' | sudo tee /etc/nginx/sites-available/default >/dev/null

# Restart nginx service
sudo service nginx start

echo "Nginx configured to run as nginx user and listen on port 8080."
